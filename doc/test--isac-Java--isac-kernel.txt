test data for communication between isac-java (in Java) and isac-kernel (in SML)
version 1: data as sent via stdin/stdout in proto3.
stdin: isac-java --> isac-kernel: Isar-block "ML {* xxx *}" contains SML "xxx"
stdout: isac-kernel --> isac-java: XML created by "writeln" from SML.
		XML is delimited by "@@@@@begin@@@@@" and "@@@@@end@@@@@" (used by Java's XML-parser);
		"1" is redundant but necessary (to be improved in test phase 1 or 2)
There are multiple calls with the same arguments for technical reasons;
these are mentioned without XML from stdout.

#------- step 0 -----------------------------------------------------
theory TTY_Communication imports Isac begin 
#------- step 1 -----------------------------------------------------
#I: Formalization
    isac-java/src/java/isac/util/Formalization.java
#O: int
ML {* CalcTree [(["equality (x+1=(2::real))", "solveFor x", "solutions L"],("Test",["sqroot-test","univariate","equation","test"],["Test","squ-equ-test-subpbl1"]))]; *}
 @@@@@begin@@@@@
  1 
 <CALCTREE>
    <CALCID> 1 </CALCID>
 </CALCTREE>
 @@@@@end@@@@@
#------- step 2 -----------------------------------------------------
#I: int
#O: (int, int)
ML {* Iterator 1; *}
 @@@@@begin@@@@@
  1 
 <ADDUSER>
   <CALCID> 1 </CALCID>
   <USERID> 1 </USERID>
 </ADDUSER>
 @@@@@end@@@@@
#------- step 3 -----------------------------------------------------
#I: int
#O: (int, ICalcIterator)
    isac-java/src/java/isac/interfaces/ICalcIterator.java
ML {* moveActiveRoot 1; *}
 @@@@@begin@@@@@
  1 
 <CALCITERATOR>
   <CALCID> 1 </CALCID>
   <POSITION>
     <INTLIST>
     </INTLIST>
     <POS> Pbl </POS>
   </POSITION>
 </CALCITERATOR>
 @@@@@end@@@@@
#------- step 4 -----------------------------------------------------
#I: (int, ICalcIterator, ICalcIterator, int, string)
#O: (int, FormHeadsContainer)
    isac-java/src/java/isac/util/formulae/FormHeadsContainer.java, is a list of ...
    isac-java/src/java/isac/util/formulae/CalcFormula.java         and ...
    isac-java/src/java/isac/util/formulae/CalcHead.java
ML {* getFormulaeFromTo 1 ([],Pbl) ([],Pbl) 0 false; *}
 @@@@@begin@@@@@
  1 
 <GETELEMENTSFROMTO>
   <CALCID> 1 </CALCID>
   <FORMHEADS>
     <CALCFORMULA>
       <POSITION>
         <INTLIST>
         </INTLIST>
         <POS> Pbl </POS>
       </POSITION>
       <FORMULA>
         <MATHML>
           <ISA> solve (x + 1 = 2, x) </ISA>
         </MATHML>
       </FORMULA>
     </CALCFORMULA>
   </FORMHEADS>
 </GETELEMENTSFROMTO>
 @@@@@end@@@@@
#------- step 5 -----------------------------------------------------
ML {* getFormulaeFromTo 1 ([],Pbl) ([],Pbl) 0 false; *}
#------- step 6 -----------------------------------------------------
#I: (int, ICalcIterator)
#O: (int, CalcHead)
    isac-java/src/java/isac/util/formulae/CalcHead.java
ML {* refFormula 1 ([],Pbl); *}
 @@@@@begin@@@@@
  1 
 <REFFORMULA>
   <CALCID> 1 </CALCID>
   <CALCHEAD status = "incorrect">
     <POSITION>
       <INTLIST>
       </INTLIST>
       <POS> Pbl </POS>
     </POSITION>
     <HEAD>
       <MATHML>
         <ISA> solve (x + 1 = 2, x) </ISA>
       </MATHML>
     </HEAD>
     <MODEL>
       <GIVEN>  </GIVEN>
       <WHERE>
         <ITEM status="false">
             <MATHML>
               <ISA> precond_rootpbl v_v </ISA>
             </MATHML>
         </ITEM>
       </WHERE>
       <FIND>  </FIND>
       <RELATE>  </RELATE>
     </MODEL>
     <BELONGSTO> Pbl </BELONGSTO>
     <SPECIFICATION>
       <THEORYID> e_domID </THEORYID>
       <PROBLEMID>
         <STRINGLIST>
           <STRING> e_pblID </STRING>
         </STRINGLIST>
       </PROBLEMID>
       <METHODID>
         <STRINGLIST>
           <STRING> e_metID </STRING>
         </STRINGLIST>
       </METHODID>
     </SPECIFICATION>
   </CALCHEAD>
 </REFFORMULA>
 @@@@@end@@@@@
#------- step 7 -----------------------------------------------------
#I: (int, string)
#O: (int, CalcChanged)
	isac-java/src/java/isac/util/CalcChanged.java
 ML {* autoCalculate 1 CompleteCalc; *}
 @@@@@begin@@@@@
  1 
 <AUTOCALC>
   <CALCID> 1 </CALCID>
   <CALCCHANGED>
     <UNCHANGED>
       <INTLIST>
       </INTLIST>
       <POS> Pbl </POS>
     </UNCHANGED>
     <DELETED>
       <INTLIST>
       </INTLIST>
       <POS> Pbl </POS>
     </DELETED>
     <GENERATED>
       <INTLIST>
       </INTLIST>
       <POS> Res </POS>
     </GENERATED>
   </CALCCHANGED>
 </AUTOCALC>
 @@@@@end@@@@@
#------- step 8 -----------------------------------------------------
ML {* getFormulaeFromTo 1 ([],Pbl) ([],Res) 0 false; *}
#------- step 9 -----------------------------------------------------
ML {* getFormulaeFromTo 1 ([],Pbl) ([],Res) 0 false; *}
#------- step 10 -----------------------------------------------------
#I: (int, ICalcIterator)
#O: (int, CalcFormula)
ML {* refFormula 1 ([],Res); *}
 @@@@@begin@@@@@
  1 
 <REFFORMULA>
   <CALCID> 1 </CALCID>
   <CALCFORMULA>
     <POSITION>
       <INTLIST>
       </INTLIST>
       <POS> Res </POS>
     </POSITION>
     <FORMULA>      
       <MATHML>
         <ISA> [x = 1] </ISA>
       </MATHML>
     </FORMULA>
   </CALCFORMULA>
 </REFFORMULA>
 @@@@@end@@@@@
#------- step 11 -----------------------------------------------------
ML {* refFormula 1 ([],Res); *}
#------- step 12 -----------------------------------------------------
ML {* refFormula 1 ([],Res); *}
#------- step 13 -----------------------------------------------------
#I: int
#O: int
ML {* DEconstrCalcTree 1; *}
 @@@@@begin@@@@@
  1 
 <DELCALC>
   <CALCID> 1 </CALCID>
 </DELCALC>
 @@@@@end@@@@@

